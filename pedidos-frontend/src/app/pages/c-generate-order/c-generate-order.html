<section class="container mx-auto pb-8">
    <div class="up-page py-2 px-6 section40">
        <h2>Generar pedidos</h2>
        <div>Bienvenido, {{nameOfUser}}</div>
    </div>
    <div class="main-page">
        <h3 class="date">{{ diasDelMes[0].nombre }} {{ diasDelMes.length > 0 ? diasDelMes[0].anio : '' }}</h3>
        <div class="flex justify-between up-table section40">

            <div class="block mb-6 flex">
                <select id="producto" name="producto"
                    class="w-full px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
                    [(ngModel)]="selectedProductId">
                    <option value="" disabled selected>Selecciona un producto</option>
                    <option *ngFor="let producto of (products$ | async)" [value]="producto.id">
                        {{ producto.name }}
                    </option>
                </select>
                <button class="btn-ficha">
                    Ver ficha técnica del producto
                </button>
            </div>

            <div class="btn-generate">
                <button (click)="solicitarPedido()" class="text-white font-semibold py-2 px-6 rounded-md">
                    Solicitar pedido
                </button>
            </div>
        </div>
        <div class="main-table">
            <table class="table-auto w-full border-collapse text-center">
                <thead>
                    <tr class="text-white font-bold">
                        <th class="p-[15px]">Fecha</th>
                        <th class="p-[15px]">Cantidad (Tm)</th>
                        <th class="p-[15px]">Vehículo</th>
                        <th class="p-[15px]">Estado del pedido</th>
                        <th class="p-[15px]">Entregado</th>
                        <th class="p-[15px]">Observación</th>
                        <th class="p-[15px]">Acciones</th>
                    </tr>
                </thead>
                <tbody>

                    <tr *ngFor="let item of orderDates; let i = index">
                        <td class="border px-4 py-2">
                            {{ item.delivery_date }}          
                        </td>
                        <td class="border px-4 py-2">
                            <input
                                type="number"
                                [(ngModel)]="orderDates[i].quantity"
                                class="placeholder:text-gray-300 w-full"
                                placeholder="Ejm: 20"
                            />
                        </td>
                        <td class="border px-4 py-2">Bombona</td>
                        <td class="border px-4 py-2"></td>
                        <td class="border px-4 py-2"></td>
                        <td class="border px-4 py-2"></td>
                        <td class="border px-4 py-2 table-actions"></td>
                    </tr>


                </tbody>
            </table>
        </div>
    </div>

    <div *ngIf="confirmOrderVisible" class="fixed inset-0 z-50 flex items-center justify-center">
    <div class="absolute inset-0 bg-black opacity-50"></div>
    <div class="bg-white rounded-lg shadow-lg z-10 max-w-md w-full p-6">
        <h3 class="text-lg font-semibold mb-4">Confirmar envío del pedido</h3>
        <p class="mb-6">¿Está seguro que desea guardar y enviar este pedido al historial de pedidos?</p>
        <div class="flex justify-end space-x-3">
        <button (click)="cancelConfirmOrder()" class="px-4 py-2 rounded border">Cancelar</button>
        <button (click)="confirmOrder()" class="px-4 py-2 rounded bg-green-600 text-white">Confirmar</button>
        </div>
    </div>
    </div>
</section>